{% extends "admin/layout.html" %}

{% block admin_content %}
<h2>Edit Subscription</h2>

{% if error %}
<div class="alert alert-error">{{ error }}</div>
{% endif %}

<div class="user-info">
    <h3>User: {{ user.username }}</h3>
    <p>Customer ID: {{ user.customer_id }}</p>
    <p>Trading Account: {{ broker.user_id_broker }} ({{ broker.broker_name }})</p>
</div>

<form method="post" class="form">
    <div class="form-group">
        <label for="expiry_date">Expiry Date</label>
        <input type="date" id="expiry_date" name="expiry_date" value="{% if broker.subscription_expiry %}{{ broker.subscription_expiry.strftime('%Y-%m-%d') }}{% endif %}" required>
    </div>
    
    <div class="form-group">
        <label for="status">Status</label>
        <select id="status" name="status">
            <option value="Active" {% if broker.subscription_status == 'Active' %}selected{% endif %}>Active</option>
            <option value="Inactive" {% if broker.subscription_status == 'Inactive' %}selected{% endif %}>Inactive</option>
        </select>
    </div>
    
    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Save Changes</button>
        <a href="{{ url_for('admin_subscriptions') }}" class="btn">Cancel</a>
    </div>
</form>

<style>
    .user-info {
        background-color: #f5f5f5;
        padding: 1rem;
        margin-bottom: 1.5rem;
        border-radius: 4px;
    }
    .form-group {
        margin-bottom: 1rem;
    }
    label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: bold;
    }
    input[type="date"],
    select {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    .form-actions {
        margin-top: 1.5rem;
    }
    .btn-primary {
        background-color: #3498db;
        color: white;
    }
</style>
{% endblock %}
